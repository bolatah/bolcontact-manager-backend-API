(this["webpackJsonpcantact-manager-app"]=this["webpackJsonpcantact-manager-app"]||[]).push([[0],{395:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(26),s=a.n(r),c=a(13),o=a(68),i=a(24),l={username:"",accessToken:"",isLoggedIn:!1},u=function(e,t){var a=t.payload,n=a.username,r=a.accessToken,s=a.isLoggedIn;switch(t.type){case"login":return{username:n,accessToken:r,isLoggedIn:s};case"logout":return l;default:return e}},d=Object(n.createContext)({userState:l,userDispatch:function(){}}),m=(d.Consumer,d.Provider),p=a(73),j=a(33),b=a.n(j),x=a(496),h=a(494),g=a(497),f=a(489),O=a(54),w=O.b.POSITION.BOTTOM_CENTER,v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"success",t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"primaryColor",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:w;"success"===e?O.b.success(t,{autoClose:null===a?2e3:a,className:null===n?"primaryColor":n,position:r}):"error"===e&&O.b.error(t,{autoClose:null===a?2e3:a,className:null===n?"dangerColor":n,position:r})},k=a(161),y=a.n(k),C="".concat("https://bolatah-contact-manager.herokuapp.com"),R=function(){var e=Object(n.useContext)(d);return y.a.create({baseURL:C,headers:{"Content-Type":"application/json",Authorization:"".concat(e.userState.accessToken)},withCredentials:!0})},T=a(2),S=function(){var e="".concat("https://bolatah-contact-manager.herokuapp.com","/contacts"),t=Object(i.g)(),a=R(),n=function(){var n=Object(p.a)(b.a.mark((function n(r){var s,c;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),s=new FormData(r.target),n.prev=2,n.next=5,a.post(e,s);case 5:n.sent&&(v("success","Contact will be added."),setTimeout((function(){t("/list")}),2e3)),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(2),c=n.t0,v("error",c.message);case 13:case"end":return n.stop()}}),n,null,[[2,9]])})));return function(e){return n.apply(this,arguments)}}();return Object(T.jsxs)(x.a,{component:"form",encType:"multipart/form-data",onSubmit:n,style:{margin:"0 auto",width:"500px",marginTop:"100px"},children:[Object(T.jsxs)(g.a,{required:!0,children:[Object(T.jsx)(f.a,{type:"text",id:"Name",name:"name",label:"Name",placeholder:"Name",maxRows:"1",required:!0,sx:{marginBottom:3}}),Object(T.jsx)(f.a,{type:"email",id:"Email",name:"email",label:"Email",placeholder:"Email",maxRows:"1",required:!0,sx:{marginBottom:3}}),Object(T.jsx)(f.a,{type:"tel",id:"phone",name:"phone",label:"phone",placeholder:"phone",maxRows:"1",required:!0,sx:{marginBottom:3}}),Object(T.jsx)(f.a,{type:"file",id:"File",name:"file",maxRows:"1",required:!0,sx:{marginBottom:3}}),Object(T.jsx)(f.a,{type:"message",id:"Message",name:"message",label:"Message",placeholder:"Message",sx:{marginBottom:3},required:!0,multiline:!0}),Object(T.jsx)(h.a,{type:"submit",variant:"outlined",children:"Submit"})]}),Object(T.jsx)(O.a,{})]})},B=a(252),q=a.n(B),D=function(){var e="".concat("https://bolatah-contact-manager.herokuapp.com","/contacts"),t=R(),a=Object(n.useState)([]),r=Object(c.a)(a,2),s=r[0],o=r[1],i=[{title:"file",field:"file",editComponent:function(e){return Object(T.jsxs)("div",{children:[Object(T.jsx)("img",{alt:"",id:"input-img",width:"45"}),Object(T.jsx)("input",{type:"file",id:"File",name:"file",accept:"image/*",onChange:function(t){try{var a=document.getElementById("File"),n=t.target.files[0],r=document.getElementById("input-img"),s=new FileReader;s.onloadend=function(){r.src="".concat(s.result),e.rowData.file=r.src},s.readAsDataURL(n),console.log(r,a,e.rowData.file)}catch(c){console.log(c)}}})]})},render:function(e){return Object(T.jsx)("img",{src:e.file.startsWith("data:image/")?"".concat(e.file):"data:image/jpg;base64,".concat(e.file),width:"45",alt:"contact"})}},{title:"name",field:"name"},{title:"email",field:"email"},{title:"phone",field:"phone"},{title:"message",field:"message"}],l=Object(n.useCallback)(Object(p.a)(b.a.mark((function a(){var n,r;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.get(e);case 2:if(!(n=a.sent)){a.next=11;break}return a.next=6,n.data;case 6:r=a.sent,console.log(r),o(r.reverse()),a.next=12;break;case 11:console.log("Error while getting data");case 12:case"end":return a.stop()}}),a)}))),[e]);Object(n.useEffect)((function(){l()}),[l]);var u=function(){var a=Object(p.a)(b.a.mark((function a(n){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!(n.name.length>2)){a.next=24;break}if(!n.email.match(/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/)){a.next=21;break}if(!(n.message.length>4)){a.next=18;break}if(!(n.phone.toString().length>5)){a.next=15;break}return a.next=7,t.post(e,n);case 7:if(!a.sent){a.next=13;break}return v("success","".concat(n.name," was added ")),a.next=12,l();case 12:return a.abrupt("return",a.sent);case 13:a.next=16;break;case 15:v("error","phone must be at least 5 characters");case 16:a.next=19;break;case 18:v("error","Message must be at least 4 characters");case 19:a.next=22;break;case 21:v("error",'Email must include "@"');case 22:a.next=25;break;case 24:v("error","Name bust be longer than 2 characters");case 25:a.next=30;break;case 27:a.prev=27,a.t0=a.catch(0),v("error","".concat(n.name," was not added"));case 30:case"end":return a.stop()}}),a,null,[[0,27]])})));return function(e){return a.apply(this,arguments)}}(),d=function(){var a=Object(p.a)(b.a.mark((function a(n,r){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!(n.name.length>2)){a.next=23;break}if(!n.email.match(/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/)){a.next=20;break}if(!(n.phone.toString().length>5)){a.next=17;break}if(!(n.message.length>4)){a.next=14;break}return a.next=7,t.put(e+"/"+r._id,n);case 7:if(!a.sent){a.next=12;break}return a.next=11,l();case 11:v("success","".concat(n.name," was updated "));case 12:a.next=15;break;case 14:v("error","Message must be at least 4 characters");case 15:a.next=18;break;case 17:v("error","Phone must be at least 5 characters");case 18:a.next=21;break;case 20:v("error","A proper mail must be given");case 21:a.next=24;break;case 23:v("error","Name must be longer than 2 characters");case 24:a.next=29;break;case 26:a.prev=26,a.t0=a.catch(0),v("error","".concat(r.name," was not updated"));case 29:case"end":return a.stop()}}),a,null,[[0,26]])})));return function(e,t){return a.apply(this,arguments)}}(),m=function(){var a=Object(p.a)(b.a.mark((function a(n){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.delete(e+"/"+n._id);case 3:if(!a.sent){a.next=8;break}return v("success","".concat(n.name," was deleted")),a.next=8,l();case 8:a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),v("error","".concat(n.name," was not deleted"));case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}();return Object(T.jsxs)("div",{children:[Object(T.jsx)(q.a,{title:"Contact List",columns:i,data:s,options:{actionsColumnIndex:-1,addRowPosition:"first"},editable:{onRowAdd:u,onRowUpdate:d,onRowDelete:m}}),Object(T.jsx)(O.a,{})]})},I=a(12),L=a(10),E=a(69),F=a(495),M=a(499),N=a(500),P=a(498),A=a(488),U=a(502),_=a(503),z=a(501),W=a(255),G=a.n(W),J=a(257),Y=a.n(J),$=a(256),H=a.n($),K=a(492),Q=a(504),V=a(505),X=a(209),Z=a.n(X),ee=240,te=Object(L.a)("main",{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,a=e.open;return Object(I.a)({flexGrow:1,padding:t.spacing(3),transition:t.transitions.create("margin",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),marginLeft:"-".concat(ee,"px")},a&&{transition:t.transitions.create("margin",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen}),marginLeft:0})})),ae=Object(L.a)(M.a,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,a=e.open;return Object(I.a)({transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},a&&{width:"calc(100% - ".concat(ee,"px)"),marginLeft:"".concat(ee,"px"),transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen})})})),ne=Object(L.a)("div")((function(e){var t=e.theme;return Object(I.a)(Object(I.a)({display:"flex",alignItems:"center",padding:t.spacing(0,1)},t.mixins.toolbar),{},{justifyContent:"flex-end"})}));function re(){var e=n.useState(!1),t=Object(c.a)(e,2),a=t[0],r=t[1],s=Object(E.a)(),i=Object(n.useContext)(d);return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsxs)(x.a,{sx:{display:"flex"},children:[Object(T.jsx)(A.a,{}),Object(T.jsx)(ae,{position:"fixed",open:a,children:Object(T.jsxs)(N.a,{children:[Object(T.jsx)(z.a,{color:"inherit","aria-label":"open drawer",onClick:function(){r(!0)},edge:"start",sx:Object(I.a)({marginRight:"36px"},a&&{display:"none"}),children:Object(T.jsx)(G.a,{})}),Object(T.jsx)(U.a,{variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:1},children:"Contact Manager"}),Object(T.jsx)(h.a,{color:"inherit",onClick:function(){v("success","You are logged out"),setTimeout((function(){i.userDispatch({type:"logout",payload:{username:"",accessToken:"",isLoggedIn:!1}})}),2e3)},children:"Log Out"})]})}),Object(T.jsxs)(F.a,{sx:{width:ee,flexShrink:0,"& .MuiDrawer-paper":{width:ee,boxSizing:"border-box"}},variant:"persistent",anchor:"left",open:a,children:[Object(T.jsx)(ne,{children:Object(T.jsx)(z.a,{onClick:function(){r(!1)},children:"rtl"===s.direction?Object(T.jsx)(H.a,{}):Object(T.jsx)(Y.a,{})})}),Object(T.jsx)(_.a,{}),Object(T.jsxs)(P.a,{children:[Object(T.jsxs)(K.a,{component:o.b,to:"/form",children:[Object(T.jsx)(Q.a,{children:Object(T.jsx)(Z.a,{})}),Object(T.jsx)(V.a,{primary:"Contact Form"})]},"formItem"),Object(T.jsxs)(K.a,{component:o.b,to:"/list",children:[Object(T.jsx)(Q.a,{children:Object(T.jsx)(Z.a,{})}),Object(T.jsx)(V.a,{primary:"Contact List"})]},"listItem")]})]}),Object(T.jsx)(te,{open:a,children:Object(T.jsx)(ne,{})})]}),Object(T.jsx)(O.a,{})]})}var se=a(506),ce=a(509),oe=a(508),ie=a(507),le="".concat("https://bolatah-contact-manager.herokuapp.com"),ue=y.a.create({baseURL:le,headers:{"Content-Type":"application/json"}}),de="".concat("https://bolatah-contact-manager.herokuapp.com","/users"),me=function(){var e=Object(n.useContext)(d),t=Object(i.g)(),a=function(){var a=Object(p.a)(b.a.mark((function a(n){var r,s,c,o,i;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),r=n.currentTarget,s=new FormData(r),c={},s.forEach((function(e,t){c[t]=e})),a.prev=5,a.next=8,ue.post("".concat(de,"/login"),{username:c.username,password:c.password});case 8:(o=a.sent)&&(e.userDispatch({type:"login",payload:{username:o.data.username,accessToken:o.data.token,isLoggedIn:!0}}),v("success","You are logged in"),setTimeout((function(){t("/contactManagerApp")}),1e3)),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(5),i=a.t0,v("error",i.message);case 16:case"end":return a.stop()}}),a,null,[[5,12]])})));return function(e){return a.apply(this,arguments)}}();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("form",{onSubmit:a,children:Object(T.jsxs)(g.a,{required:!0,children:[Object(T.jsx)(f.a,{type:"text",label:"username",id:"Username",name:"username",placeholder:"Name",maxRows:"1",required:!0,sx:{marginBottom:3},autoComplete:"off"}),Object(T.jsx)(f.a,{type:"password",label:"password",id:"Password",name:"password",placeholder:"password",maxRows:"1",required:!0,sx:{marginBottom:3},autoComplete:"off"})," ",Object(T.jsx)("div",{}),Object(T.jsx)("span",{children:Object(T.jsx)(h.a,{type:"submit",children:"Login"})})]})}),Object(T.jsx)(O.a,{})]})};function pe(){return Object(T.jsxs)(se.a,{children:[Object(T.jsx)(ie.a,{component:"img",height:"140",image:"https://www.spirit-of-the-sea.com/fileadmin//user_upload/Slider/Home/3.jpg"}),Object(T.jsxs)(oe.a,{children:[Object(T.jsx)(U.a,{gutterBottom:!0,variant:"h5",component:"div",children:"Contact Manager"}),Object(T.jsxs)(U.a,{variant:"body2",color:"text.secondary",children:['Welcome to the "Contact-Manager". If you are not already registered please',Object(T.jsx)(h.a,{component:o.b,to:"/register",style:{textTransform:"none",fontSize:"1.2rem"},children:"register!"})]})]}),Object(T.jsxs)(ce.a,{children:[Object(T.jsx)(me,{}),Object(T.jsx)("br",{}),Object(T.jsx)("br",{})]})]})}var je="".concat("https://bolatah-contact-manager.herokuapp.com","/users"),be=function(){var e=Object(i.g)(),t=Object(i.f)().state,a=function(){var a=Object(p.a)(b.a.mark((function a(n){var r,s,c;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),r=new FormData(n.currentTarget),s={},r.forEach((function(e,t){s[t]=e})),s.confirmPassword!==s.password&&v("error","password don't match"),a.prev=5,a.next=8,ue.post("".concat(je,"/register"),s);case 8:200===a.sent.status?(v("success","".concat(s.username," is registered.")),setTimeout((function(){e((null===t||void 0===t?void 0:t.path)||"/login")}),2e3)):v("error","username already exists"),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(5),c=a.t0,v("error",c.message);case 16:case"end":return a.stop()}}),a,null,[[5,12]])})));return function(e){return a.apply(this,arguments)}}();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("form",{onSubmit:a,style:{margin:"0 auto",width:"220px",marginTop:"100px"},children:Object(T.jsxs)(g.a,{required:!0,children:[Object(T.jsx)(f.a,{label:"username",type:"text",id:"username",name:"username",placeholder:"Name",maxRows:"1",required:!0,sx:{marginBottom:3}}),Object(T.jsx)(f.a,{label:"email",type:"email",id:"email",name:"email",placeholder:"Email",maxRows:"1",required:!0,sx:{marginBottom:3}}),Object(T.jsx)(f.a,{label:"phone",type:"tel",id:"phone",name:"phone",placeholder:"Phone",maxRows:"1",required:!0,sx:{marginBottom:3}}),Object(T.jsx)(f.a,{label:"password",type:"password",id:"password",name:"password",placeholder:"password",maxRows:"1",required:!0,sx:{marginBottom:3}}),Object(T.jsx)(f.a,{label:"confirm password",type:"password",id:"confirm-password",name:"confirmPassword",placeholder:"confirm password",maxRows:"1",required:!0,sx:{marginBottom:3}}),Object(T.jsx)("span",{children:Object(T.jsx)(h.a,{type:"submit",id:"submit",children:"Register"})})]})}),Object(T.jsx)(O.a,{})]})},xe=function(e){var t=Object(n.useContext)(d),a=Object(i.f)(),r=e.children;return""!==t.userState.accessToken?Object(T.jsx)(T.Fragment,{children:r}):Object(T.jsx)(i.a,{to:"/",state:{from:a},replace:!0})},he=function(){var e=Object(n.useReducer)(u,l),t=Object(c.a)(e,2),a=t[0],r=t[1];return Object(T.jsx)(m,{value:{userState:a,userDispatch:r},children:Object(T.jsx)(o.a,{children:Object(T.jsxs)(i.d,{children:[Object(T.jsx)(i.b,{path:"/",element:Object(T.jsx)(pe,{})}),Object(T.jsx)(i.b,{path:"/register",element:Object(T.jsx)(be,{})}),Object(T.jsx)(i.b,{path:"*",element:Object(T.jsx)(pe,{})}),Object(T.jsx)(i.b,{path:"/contactManagerApp",element:Object(T.jsx)(xe,{children:Object(T.jsx)(re,{})})}),Object(T.jsx)(i.b,{path:"/form",element:Object(T.jsx)(xe,{children:Object(T.jsx)(S,{})})}),Object(T.jsx)(i.b,{path:"/list",element:Object(T.jsx)(xe,{children:Object(T.jsx)(D,{})})})]})})})};a(391);a(392).config(),s.a.render(Object(T.jsx)(he,{}),document.getElementById("root"))}},[[395,1,2]]]);
//# sourceMappingURL=main.335a1f3c.chunk.js.map